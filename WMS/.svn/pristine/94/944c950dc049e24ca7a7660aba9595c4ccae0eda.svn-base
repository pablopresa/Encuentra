<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
	pageEncoding="ISO-8859-1"%>
<%@ page isELIgnored="false"%>
<%
String path = request.getContextPath();
String basePath = request.getScheme()+"://"+request.getServerName()+":"+request.getServerPort()+path+"/";
%>

<%@ taglib uri="http://java.sun.com/jstl/core" prefix="c"%>
		
		
		<c:set var = "colapsar" scope = "request" value = "yes"/>
		
		<jsp:include page="/v3/util/menu.jsp"></jsp:include>
		
        <!-- /. NAV SIDE  -->
        	   	<div class="row">
                	<div class="col-md-12">
                    	<h3>Ecommerce&nbsp;<i class="fa fa-angle-double-right" aria-hidden="true"></i>&nbsp;Detalles de Pedidos</h3>   
                        <h6></h6>
                    </div>
                </div>              
        <!-- /. ROW  -->
         <hr />
         <div class="row" >
            <div class="col-md-12">
                <div class="card">
					<div class="card-header">
						<h5> Filtros </h5>
					</div>
                	<div class="card-body">
                		<form class="form-horizontal" role="form"  action="<%=basePath%>/EcommerceDarPedidos.do">
                                 <div class="row">
	                				 <div class="col-sm-6 col-lg-4">
									    <div class="form-group">
									          <label class="col-md-4 control-label" for="art" class="col-md-4 control-label">Nro. Pedido:&nbsp;</label>
									            <div class="col-md-8">
									          		<div class="input-group input-group-sm">
									            		<input type="text" class="form-control bg-white" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="pedido" value="${pedido}">
												
													</div>
												</div>
									    </div>
									 </div>	
	                				 <div class="col-sm-6 col-lg-4">
									    <div class="form-group">
									      <label class="col-md-4 control-label" for="art" class="col-md-4 control-label">Vta. Fenicio:&nbsp;</label>
									        <div class="col-md-8">
									          <div class="input-group input-group-sm">
									            <input type="text" class="form-control bg-white" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="fenicio" value="${fenicio}">
											  </div>
											</div>
									    </div>
									 </div>
									<div class="col-sm-6 col-lg-4">
								        <div class="form-group">
								          <label class="col-md-4 control-label" for="art" class="col-md-4 control-label">Articulo:&nbsp;</label>
								          <div class="col-md-8">
									          <div class="input-group input-group-sm">
									            <input type="text" class="form-control bg-white" aria-label="Small" aria-describedby="inputGroup-sizing-sm" name="articulo" value="${articulo}">
											  </div>
										  </div>
								        </div>
								    </div>
									<div class="col-sm-6 col-lg-4">
										<div class="form-group">
											    <label class="col-md-4 control-label" for="fini">Fecha:&nbsp;</label>
												<div class="col-md-8">
										           <input class="form-control form-control-sm bg-white rango" type="text" name="fini" id="fini">
										        </div>
										        
										    </div>										
									</div>
                            		<div class="col-sm-6 col-lg-4">
								        <div class="form-group">
								          <label class="col-md-4 control-label" for="art" class="col-md-4 control-label">Estado:&nbsp;</label>
								          <div class="col-md-8">
								            <select class="select2-multi col-sm-12" multiple="multiple" placeholder="Estanterías" name="estado">
										        <option value=""></option>
										    	<c:forEach var="d" items="${estadosL}">
										    		<c:if test="${estado==d.id}">	
														 <option value="${d.id}" selected="selected">${d.descripcion}</option>
													</c:if>
													<c:if test="${estado!=d.id}">	
														 <option value="${d.id}">${d.descripcion}</option>
													</c:if>
										        	
										    	</c:forEach>
										  	</select>
								          </div>
								        </div>
								    </div>
								    <div class="col-sm-6 col-lg-4">
								        <div class="form-group">
								          <label class="col-md-4 control-label" for="art" class="col-md-4 control-label">Forma de pago:&nbsp;</label>
								          <div class="col-md-8">
								            <select class="form-control bg-white" tabindex="6" name="forma">
										        <option value=""></option>
										    	<c:forEach var="d" items="${formasPago}">
										    		<c:if test="${forma==d.descripcion}">	
														 <option value="${d.descripcion}" selected="selected">${d.descripcion}</option>
													</c:if>
													<c:if test="${forma!=d.descripcion}">	
														<option value="${d.descripcion}">${d.descripcion}</option> 
													</c:if>
										        	
										    	</c:forEach>
										  	</select>
								          </div>
								        </div>
								    </div>
								   <div class="col-sm-6 col-lg-4">
								        <div class="form-group">
								          <label class="col-md-4 control-label" for="courier" class="col-md-4 control-label">Courier/Destino:&nbsp;</label>
								          <div class="col-md-8">
								            <select data-placeholder="Puede Seleccionar Varios" class="select2-multi bg-enc" multiple="multiple" tabindex="6" name="couriers">
										        <option value=""></option>
										    	<c:forEach var="c" items="${couriers}">
										        	<option value="${c.id}">${c.descripcion}</option>
										    	</c:forEach>
										  	</select>
								          </div>
								        </div>
								    </div>
										<div class="flex-container">
											
											<label class="p-2" for="switch-0">Sin Etiqueta:&nbsp;</label>
											<div class="switch d-inline m-r-10">
												<c:if test="${sinEtqt=='on'}">	
													<input type="checkbox" name="sinEtqt" id="switch-0" checked="checked"><label for="switch-0" class="cr"></label>
												</c:if>
											    <c:if test="${sinEtqt!='on'}">	
													<input type="checkbox" name="sinEtqt" id="switch-0" ><label for="switch-0" class="cr"></label>
												</c:if>
											</div>
											
											<label class="p-2" for="switch-1">Sin Stock:&nbsp;</label>
											<div class="switch d-inline m-r-10">
												<c:if test="${DepCero=='on'}">	
													<input type="checkbox" name="DepCero" id="switch-1" checked="checked"><label for="switch-1" class="cr"></label>
												</c:if>
											    <c:if test="${DepCero!='on'}">	
													<input type="checkbox" name="DepCero" id="switch-1" ><label for="switch-1" class="cr"></label>
												</c:if>
											</div>
											
											<label class="p-2" for="switch-2">Sin Factura:&nbsp;</label>
											<div class="switch d-inline m-r-10">
												<c:if test="${agrpTienda=='on'}">	
													<input type="checkbox" name="agrpTienda" id="switch-2" checked="checked"><label for="switch-2" class="cr"></label>
												</c:if>
											    <c:if test="${agrpTienda!='on'}">	
													<input type="checkbox" name="agrpTienda" id="switch-2" ><label for="switch-2" class="cr"></label>
												</c:if>
											</div>
											
											<label class="p-2" for="switch-2">A consolidar:&nbsp;</label>
											<div class="switch d-inline m-r-10">
												<c:if test="${aConsolidar=='on'}">	
													<input type="checkbox" name="aConsolidar" id="switch-3" checked="checked"><label for="switch-3" class="cr"></label>
												</c:if>
											    <c:if test="${aConsolidar!='on'}">	
													<input type="checkbox" name="aConsolidar" id="switch-3" ><label for="switch-3" class="cr"></label>
												</c:if>
											</div>
											
											
										</div>

								
								
								
								<div class="col-sm-12 col-lg-12">
									<div class="text-center"> 
										<input type="submit" class="btn btn-success" value="Ver Pedidos">
									</div>
								</div>
							</div>
						</form>
						</div>
						</div>
					</div>	
                </div>
                <div class="row bg-white" >
                	 <div class="col-md-12">
		                	<c:if test="${menError!=null}">
		                		<h6><strong>Mensaje:</strong></h6>
		                   		<div class="alert alert-info">
		                   			<strong style="color: red"> ${menError}</strong>            
		                   		</div>
		                   	</c:if>
	                    	<c:if test="${lstPedidosConsola!=null}">
                           		<table class="table table-compact table-bordered table-hover" id="tablaEnc-monitor">
									<thead class="thead-dark">
	                                	<tr>
	                                     	<th class="text-center">Pedido</th>
	                                      	<th class="text-center">Venta</th>
	                                      	<th class="text-center">Cliente</th>
	                                       	<th class="text-center">Estado<br/>Encuentra</th>
											<th class="text-center">Articulo</th>
											<c:if test="${aConsolidar!='on'}">	
												<th class="text-center">Deposito<br/>Pedido</th>
											</c:if>
											<c:if test="${aConsolidar=='on'}">	
												<th class="text-center">Cant.<br/>Depositos</th>
											</c:if>
											<th class="text-center">Unidades<br/>Pedidas</th>
											<th class="text-center">Unidades<br/>Procesadas</th>
											<th class="text-center">Unidades<br/>Confirmadas</th>
											<th class="text-center">Fecha<br/>Pedido</th>
											<th class="text-center">Fecha<br/>Confirmado</th>
											<th class="text-center">Fecha<br/>Procesado</th>
											<th class="text-center">Usuario<br/>Procesa</th>
											<th class="text-center">Fecha<br/>Despacho</th>
											<th class="text-center">Fecha<br/>Entrega</th>
											<th class="text-center">Destino</th>
											<th class="text-center">Estado<br/>Ecommerce</th>
											<c:if test="${aConsolidar=='on'}">	
												<th class="text-center">Consolidar</th>
											</c:if>
											<th class="text-center">Canal</th>
											<th class="text-center">Acción</th>
										</tr>
									</thead>
	                                <tbody>
									<c:forEach var="p" items="${lstPedidosConsola}">
										<c:if test="${p.change==1}">	
											<c:set var="color" value="border-collapse:collapse;border-bottom:1pxdashedblack;font-size:13px;background:#87FF8D;"></c:set> 
										</c:if>
										<c:if test="${p.artMod==1}">	
											<c:set var="color" value="border-collapse:collapse;border-bottom:1pxdashedblack;font-size:13px;background:#FFB861;"></c:set>													
										</c:if>
										<c:if test="${p.estado=='Cancelado'}">	
											<c:set var="color" value="border-collapse:collapse;border-bottom:1pxdashedblack;font-size:13px;background:#FF6961;"></c:set> 													
										</c:if>
										<c:if test="${p.change!=1 && p.artMod!=1 && p.estado!='Cancelado'}">	
											<c:set var="color" value="border-collapse:collapse;border-bottom:1pxdashedblack;font-size:13px;"></c:set> 
										</c:if>
										<c:if test="${p.aConsolidar=='SI'}">	
											<c:set var="color" value="border-collapse:collapse;border-bottom:1pxdashedblack;font-size:13px;background:#ffeeba;"></c:set> 
										</c:if>
										<tr class="gradeD" style=<c:out value="${color}"></c:out>>											
											<td class="text-center"><a href="<%=basePath%>EcommerceLogPedido.do?idPedido=${p.idPedido}">${p.idPedido}</a></td>
											<td class="text-center"><a href="${urlMonitorEC}${p.idMS}" target="_blank">${p.idMS}</a></td>	
											<td class="text-center">${p.descripcion}</td>													
											<td class="text-center">${p.estado}</td>													
											<td class="text-center">${p.articulo} <br><strong>${p.descArt}</strong></td>
											<td class="text-center">${p.deposito}</td>
											<td class="text-center">${p.cr}</td>
											<td class="text-center">${p.cp}</td>
											<td class="text-center">${p.cc}</td>
											<td class="text-center">${p.fechaR}</td>
											<td class="text-center">${p.fechaC}</td>
											<td class="text-center">${p.fechaP}</td>
											<td class="text-center">${p.usuClasifica}</td>
											<td class="text-center">${p.fechaDespacho}</td>											
											<td class="text-center">${p.fechaEntrega}</td>											
											<td class="text-center">${p.destinoNombre}</td>
											<td class="text-center">${p.estadoEcommerce}</td>
											<c:if test="${aConsolidar=='on'}">	
												<c:if test="${p.aConsolidar=='SI'}">	
													<td class="text-center"><span class="fas fa-code-branch" style="color: red;"></span><label class="hidden">${p.aConsolidar}</label></td>
												</c:if>
												<c:if test="${p.aConsolidar!='SI'}">	
													<td class="text-center"><label class="hidden">${p.aConsolidar}</label></td>
												</c:if>
											</c:if>
											<td class="text-center">${p.idCanal}</td>
											<td class="text-center">
												<div class="btn-group">
													<a href="<%=basePath%>editarPedidoEcommerce.do?idPedido=${p.idPedido}"><button type="button" class="btn btn-dark btn-sm"> <span class="feather icon-edit"></span></button></a> 
													<a href="<%=basePath%>reprintEcommerce.do?req=ok&idPedido=${p.idPedido}"><button type="button" class="btn btn-success btn-sm"> <span class="feather icon-printer"></span></button></a>
												</div>
											</td>
										</tr>
									</c:forEach>
									</tbody>
								</table>
	                          </c:if>
                    </div><!-- row -->
                    </div>
		<div class="md-overlay"></div>  
		
		<script type="text/javascript">
		 	$(window).on('load', function() {
		        // [ dark-toolbar ]
		        $('#dark-toolbar').toolbar({
		            content: '#toolbar-options',
		            style: 'dark'
		        });
	        });
		</script>
		
		    <c:if test="${rango!=null}">
				<!-- scripts y css de picker -->
				<script type="text/javascript">
					document.getElementById("fini").value = "${rango}"; 
				</script>
				<!-- fin scripts y css de picker -->
			</c:if>
				
        <jsp:include page="/v3/util/footer.jsp"></jsp:include>
		
<!-- <script>
	function closeModal(id){
		$(id).modal('hide');
	}
</script> -->		
